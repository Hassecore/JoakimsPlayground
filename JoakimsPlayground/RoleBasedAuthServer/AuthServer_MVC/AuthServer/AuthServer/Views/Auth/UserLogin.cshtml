@model AuthServer.Models.LoginDto

<div class="text-center">
    <h1 class="display-4">Log in</h1>
</div>

@if (TempData["LoginFailedMessage"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        @TempData["LoginFailedMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<a asp-controller="Auth"
   asp-action="Index"
   asp-all-route-data="Context.Request.Query.ToDictionary(q => q.Key, q => (string)q.Value.ToString())"
   class="btn btn-secondary mt-2 mb-1">
    Back
</a>

<form asp-action="LoginForm" method="post">
    <input type="hidden" name="redirectUrl" value="@Context.Request.Query["redirect_url"]" />
    <input type="hidden" name="redirectUrl" value="@Context.Request.Query["code_challenge"]" />
    
    <label class="mt-3">Username</label>
    <input class="form-control" type="text" placeholder="Username" asp-for="UserName" />

    <label class="mt-4">Password</label>
    <input class="form-control" type="Password" placeholder="Password" asp-for="Password" />

    <button class="btn btn-primary mt-4" type="submit" >Log in</button>
</form>
@* <a asp-controller="Auth"
   asp-action="Index"
   asp-all-route-data="Context.Request.Query.ToDictionary(q => q.Key, q => (string)q.Value.ToString())"
   class="btn btn-secondary mt-2">
    Back to Index
</a> *@

@* <a href="/auth/google-login">Sign in with Google</a> *@
<a asp-controller="Auth" 
    asp-action="GoogleLogin"
    asp-all-route-data="Context.Request.Query.ToDictionary(q => q.Key, q => (string)q.Value.ToString())" >
    Sign in with Google
</a>
 
<div asp-validation-summary="All" class="text-danger"></div>